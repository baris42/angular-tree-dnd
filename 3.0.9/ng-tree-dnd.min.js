!function(){"use strict";function e(e,n,t,r,a){var l,o,i,d=!1,s=!1,c=!1,_=[],u={setViewport:function(e){l=e},getViewport:function(){return l},add:function(e,n){p(),_.push({element:n,scope:e})},setTemplate:function(e,n){n},getItems:function(){return _},updateDelayed:p},f=angular.element(e);return f.on("load resize scroll",p),u;function g(){({width:f.prop("offsetWidth")||document.documentElement.clientWidth,height:f.prop("offsetHeight")||document.documentElement.clientHeight,top:n[0].body.scrollTop||n[0].documentElement.scrollTop,left:n[0].body.scrollLeft||n[0].documentElement.scrollLeft}),d||s?c=!0:(d=!0,function e(){if(s)return;var n=0<n?n:_.length;0<n?(_[0],s=!0,i=t(function(){_.splice(0,1),s=!1,n--,t.cancel(i),e()},0)):(d=!1,c&&(c=!1,g()))}())}function p(){t.cancel(o),o=t(function(){g()},0)}}function n(j,i,d,s,A,M,P,Y,X,O,H,c){return{restrict:"E",scope:!0,replace:!0,controller:["$scope","$element","$attrs",function(f,e,i){f.indent=20,f.indent_plus=15,f.indent_unit="px",f.$tree_class="table",f.primary_key="__uid__",f.$type="TreeDnD",f.colDefinitions=[],f.$globals={},f.$class=angular.copy(X),angular.extend(f.$class.icon,{1:i.iconExpand||"glyphicon glyphicon-minus",0:i.iconCollapse||"glyphicon glyphicon-plus","-1":i.iconLeaf||"glyphicon glyphicon-file"}),f.treeData=[],f.tree_nodes=[],f.for_all_descendants=function(e,n,t,r){if(angular.isFunction(n)){var a,l,o;if(n(e,t))return!1;if("object"!=typeof e)return!1;for(o=e.__children__,l=o?o.length:0,a=0;a<l;a++)if(!f.for_all_descendants(o[a],n,e)&&!r)return!1}return!0},f.getLastDescendant=function(e){var n,t;if(e||"object"!=typeof f.tree||(e=f.tree.selected_node),"object"==typeof e&&angular.isArray(e.__children__))return 0===(t=e.__children__.length)?e:(n=e.__children__[t-1],f.getLastDescendant(n))},f.getElementChilds=function(){return angular.element(e[0].querySelector("[tree-dnd-nodes]"))},f.onClick=function(e){angular.isDefined(f.tree)&&angular.isFunction(f.tree.on_click)&&setTimeout(function(){f.tree.on_click(e)},0)},f.onSelect=function(e){angular.isDefined(f.tree)&&(e!==f.tree.selected_node&&f.tree.select_node(e),angular.isFunction(f.tree.on_select)&&setTimeout(function(){f.tree.on_select(e)},0))},f.toggleExpand=function(e,n){var t;"object"==typeof e&&(angular.isFunction(n)?t=!!n(e):"object"==typeof f.$callbacks&&angular.isFunction(f.$callbacks.expand)&&(t=!!f.$callbacks.expand(e)),0<e.__children__.length&&(e.__expanded__=void 0!==t?t:!e.__expanded__))};var t=function(e){return"#"+e.__parent__+"#"+e[f.primary_key]};f.getHash=t,f.$callbacks={getHash:t,setHash:function(e){var n=t(e);return(angular.isUndefinedOrNull(e.__hashKey__)||e.__hashKey__!==n)&&(e.__hashKey__=n),e},for_all_descendants:f.for_all_descendants,accept:function(){return!0===f.dropEnabled},calsIndent:function(e,n,t){var r=0,a=t?0:f.indent_plus;return n||(r=f.indent_unit?f.indent_unit:"px"),e-1<1?a+r:f.indent*(e-1)+a+r},droppable:function(){return!0===f.dropEnabled},draggable:function(){return!0===f.dragEnabled},beforeDrop:function(){return!0},changeKey:function(e){var n=e.__uid__;e.__uid__=Math.random(),e.__selected__&&delete e.__selected__,"__uid__"!==f.primary_key&&(n=(n=""+e[f.primary_key]).replace(/_#.+$/g,"")+"_#"+e.__uid__,e[f.primary_key]=n)},clone:function(e){var n=angular.copy(e);return this.for_all_descendants(n,this.changeKey),n},remove:function(e,n,t,r){var a=n.splice(e.__index__,1)[0];return r||f.reload_data(),a},clearInfo:function(e){delete e.__inited__,delete e.__visible__},add:function(e,n,t){this.for_all_descendants(e,this.clearInfo),t&&(-1<t.length&&-1<n?t.splice(n,0,e):t.push(e))}},f.deleteScope=function(e,n){var t=n.__hashKey__;f.$globals[t]&&f.$globals[t]===e&&delete f.$globals[t]},f.setScope=function(e,n){var t=n.__hashKey__;f.$globals[t]!==e&&(f.$globals[t]=e)},f.getScope=function(e){if(e){var n=e.__hashKey__;return f.$globals[n]}return f},(i.enableDrag||i.enableDrop)&&(f.placeElm=void 0,f.dragEnabled=void 0,f.dropEnabled=void 0,f.horizontal=void 0,i.enableDrag&&(f.dragDelay=0,f.enabledMove=!0,f.statusMove=!0,f.enabledHotkey=!1,f.enabledCollapse=void 0,f.statusElm=void 0,f.dragging=void 0,angular.extend(f.$callbacks,{beforeDrag:function(){return!0},dragStop:function(e,n){e&&(e.changed||!e.drag.enabledMove)&&n&&(e.target.reload_data(),e.target!==e.drag&&e.drag.enabledMove&&e.drag.reload_data())},dropped:function(e){if(e){var n,t,r=e.node,a=e.move,l=e.parent||e.drag.treeData,o=a.parent||e.target.treeData,i=e.drag.enabledMove;return!(!e.changed&&i)&&(!!e.target.$callbacks.accept(e,e.move,e.changed)&&(i?(t=l,angular.isDefined(t.__children__)&&(t=t.__children__),n=e.drag.$callbacks.remove(r,t,e.drag.$callbacks,!0)):n=e.drag.$callbacks.clone(r,e.drag.$callbacks),i&&e.drag===e.target&&l===o&&a.pos>=e.node.__index__&&a.pos--,(t=o).__children__&&(t=t.__children__),e.target.$callbacks.add(n,a.pos,t,e.drag.$callbacks),!0))}},dragStart:function(e){},dragMove:function(e){}}),f.setDragging=function(e){f.dragging=e},f.enableMove=function(e){f.enabledMove="boolean"!=typeof e||e},i.enableStatus&&(f.enabledStatus=!1,f.hideStatus=function(){f.statusElm&&f.statusElm.addClass(f.$class.hidden)},f.refreshStatus=function(){if(f.dragging&&f.enabledStatus){var e=f.statusElm;f.enabledMove?f.statusElm=angular.element(Y.getMove(f)):f.statusElm=angular.element(Y.getCopy(f)),e!==f.statusElm&&(e&&(f.statusElm.attr("class",e.attr("class")),f.statusElm.attr("style",e.attr("style")),e.remove()),M.find("body").append(f.statusElm)),f.statusElm.removeClass(f.$class.hidden)}},f.setPositionStatus=function(e){f.statusElm&&(f.statusElm.css({left:e.pageX+10+"px",top:e.pageY+15+"px","z-index":9999}),f.statusElm.addClass(f.$class.status))})),f.targeting=!1,f.getPrevSibling=function(e){if(e&&0<e.__index__){var n=e.__index__-1;return angular.isDefined(e.__parent_real__)?f.tree_nodes[e.__parent_real__].__children__[n]:f.treeData[n]}},f.getNode=function(e){if(!angular.isUndefinedOrNull(e))return f.tree_nodes[e]},f.initPlace=function(e,n){if(!f.placeElm)if(f.isTable){f.placeElm=angular.element(A.document.createElement("tr"));var t=f.colDefinitions.length;for(f.placeElm.append(angular.element(A.document.createElement("td")).addClass(f.$class.empty).addClass("indented").addClass(f.$class.place));0<t--;)f.placeElm.append(angular.element(A.document.createElement("td")).addClass(f.$class.empty).addClass(f.$class.place))}else f.placeElm=angular.element(A.document.createElement("li")).addClass(f.$class.empty).addClass(f.$class.place);return n&&f.placeElm.css("height",O.height(n)+"px"),e?e[0].parentNode.insertBefore(f.placeElm[0],e[0]):f.getElementChilds().append(f.placeElm),f.placeElm},f.hidePlace=function(){f.placeElm&&f.placeElm.addClass(f.$class.hidden)},f.showPlace=function(){f.placeElm&&f.placeElm.removeClass(f.$class.hidden)},f.getScopeTree=function(){return f});f.$safeApply=function(e){var n=this.$root.$$phase;"$apply"===n||"$digest"===n?e&&"function"==typeof e&&e():this.$apply(e)},f.hiddenChild=function(e,n){var t=f.getScope(e);return t?n&&n.__expanded__&&n.__visible__?(t.$element.removeClass(f.$class.hidden),e.__visible__=!0):(t.$element.addClass(f.$class.hidden),e.__visible__=!1):e.__visible__=!!(n&&n.__expanded__&&n.__visible__),!1===e.__expanded__};var l,o,n,r,a,d,s,c,_,u,g,p,h,m,v,b,y={showParent:!0,showChild:!1,beginAnd:!0},$=[["enableDrag",[["boolean","enableStatus",void 0,"enabledStatus"],["boolean","enableMove",void 0,"enabledMove"],["number","dragDelay",0,void 0,0],["boolean","enableCollapse",void 0,"enabledCollapse"],["boolean","enableHotkey",void 0,"enabledHotkey",void 0,function(e){f.enabledMove=!e&&f.statusMove}]]],[["enableDrag","enableStatus"],[["string","templateCopy",i.templateCopy,"templateCopy",void 0,function(e){e&&P.get(e)&&Y.setCopy(e,f)}],["string","templateMove",i.templateMove,"templateMove",void 0,function(e){e&&P.get(e)&&Y.setMove(e,f)}]]],[[["enableDrag","enableDrop"]],[["number","dragBorder",30,"dragBorder",30]]],["*",[["boolean","treeTable",!0,"treeTable",void 0],["boolean","horizontal"],["callback","treeClass",function(e){switch(typeof e){case"string":f.$tree_class=e;break;case"object":angular.extend(f.$class,e),f.$tree_class=f.$class.tree;break;default:f.$tree_class=i.treeClass}},"treeClass",function(){f.$tree_class=f.$class.tree+" table"},void 0,function(){if(/^(\s+[\w\-]+){2,}$/g.test(" "+i.treeClass))return f.$tree_class=i.treeClass.trim(),!0}],[["object","string"],"expandOn",w,"expandingProperty",w,function(e){angular.isUndefinedOrNull(e)&&(f.expandingProperty=i.expandOn)}],["object","treeControl",angular.isDefined(f.tree)?f.tree:{},"tree",void 0,function(e){angular.isFunction(n)||(n=H("$TreeDnDControl")),angular.isFunction(n)&&angular.extend(f.tree,n(f),e)}],[["array","object"],"columnDefs",C,"colDefinitions",C,function(e){!angular.isUndefinedOrNull(e)&&angular.isArray(e)||(f.colDefinitions=C())}],[["object","string","array","function"],"orderBy",i.orderBy],[["object","array"],"filter",void 0,"filter",void 0,function(e){var n=!1;if(angular.isDefined(e)&&!angular.isArray(e)){var t,r=Object.keys(e),a=r.length;if(0<a)for(t=0;t<a;t++)if("string"!=typeof e[r[t]]||0!==e[r[t]].length){n=!0;break}}f.enabledFilter=n,N()}],["object","filterOptions",y,"filterOptions",y,function(e){"object"==typeof e&&(f.filterOptions=angular.extend(y,e))}],["string","primaryKey",i.primaryKey,"primary_key","__uid__"],["string","indentUnit",i.indentUnit,"indent_unit"],["number","indent",30,void 0,30],["number","indentPlus",20,void 0,20],["object","callbacks",function(e){return angular.forEach(e,function(e,n){"function"==typeof e&&f.$callbacks[n]&&(f.$callbacks[n]=e)}),f.$callbacks},"$callbacks"],["number","expandLevel",3,"expandLevel",3,function(){N()}],["number","treeLimit",100,"$TreeLimit",100],["boolean","enableDrag",void 0,"dragEnabled"],["boolean","enableDrop",void 0,"dropEnabled"]]]],D=$.length;for(r=0;r<D;r++)if(E(i,$[r][0],!0))for(s=$[r][1],a=0,d=s.length;a<d;a++)c=s[a][0],_=s[a][1],u=s[a][2],g=s[a][3],p=s[a][4],h=s[a][5],m=s[a][6],T(c,_,u,g,p,h,m);i.treeData&&f.$watch(i.treeData,function(e){angular.equals(e,f.treeData)||(b=e,angular.isUndefinedOrNull(v)&&(v=j(x,350)))},!0);function x(){f.treeData=b,N(),v=void 0}function E(e,n,t){return!angular.isUndefinedOrNull(n)&&("*"===n||!angular.isUndefined(e[n])||(angular.isArray(n)?function(e,n,t){var r,a=n.length,l=!1;if(0===a)return;for(r=0;r<a;r++)if(E(e,n[r],!t)){if(l=!0,!t)return!0}else if(t)return!1;return l}(e,n,t):void 0))}function T(n,e,t,r,a,l,o){if(r=r||e,"string"==typeof n||angular.isArray(n)){if(angular.isFunction(o)&&o())return;"string"==typeof i[e]?f.$watch(i[e],function(e){"string"==typeof n&&typeof e===n||angular.isArray(n)&&-1<n.indexOf(typeof e)?f[r]=e:angular.isFunction(t)?f[r]=t(e):f[r]=t,angular.isFunction(l)&&l(f[r],f)},!0):angular.isFunction(a)?f[r]=a():angular.isUndefined(a)||(f[r]=a)}}function w(){if(f.treeData&&f.treeData.length){var e,n,t=f.treeData[0],r=Object.keys(t),a=new RegExp("^__([a-zA-Z0-9_-]*)__$");for(n=0,e=r.length;n<e;n++)if("string"==typeof t[r[n]]&&!a.test(r[n]))return void(f.expandingProperty=r[n]);angular.isUndefinedOrNull(f.expandingProperty)&&(f.expandingProperty=r[0])}}function C(){if(f.treeData.length){var e,n,t=[],r=f.treeData[0],a=new RegExp("(^__([a-zA-Z0-9_-]*)__$|^"+f.expandingProperty+"$)"),l=Object.keys(r);for(e=0,n=l.length;e<n;e++)"string"!=typeof r[l[e]]||a.test(l[e])||t.push({field:l[e]});f.colDefinitions=t}}function S(e,n,t,r,a,l,o){if("object"!=typeof n)return 0;var i,d,s,c,_,u;if(angular.isArray(n.__children__)||(n.__children__=[]),n.__parent_real__=r,n.__parent__=t,d=n.__children__.length,angular.isUndefinedOrNull(n.__expanded__)&&0<d&&(n.__expanded__=a<f.expandLevel),s=0===d?-1:n.__expanded__?1:0,c=e.length,n.__index__=o,n.__index_real__=c,n.__level__=a,n.__icon__=s,n.__icon_class__=f.$class.icon[s],n.__visible__=!!l,angular.isUndefinedOrNull(n.__uid__)&&(n.__uid__=""+Math.random()),u=f.getHash(n),(angular.isUndefinedOrNull(n.__hashKey__)||n.__hashKey__!==u)&&(n.__hashKey__=u),e.push(n),_=1,0<d)for(i=0;i<d;i++)_+=S(e,n.__children__[i],n[f.primary_key],c,a+1,l&&n.__expanded__,i);return n.__dept__=_}function k(e){return angular.isDefined(f.tree_nodes)&&delete f.tree_nodes,f.tree_nodes=e}function N(e){var n,t,r=[];if(angular.isDefined(e)){if(!angular.isArray(e)||0===e.length)return k([]);n=e}else{if(!angular.isArray(f.treeData)||0===f.treeData.length)return k([]);n=f.treeData}if(i.expandOn||w(),i.columnDefs||C(),angular.isDefined(f.orderBy)&&(angular.isFunction(o)||(o=H("$TreeDnDOrderBy")),angular.isFunction(o)&&(n=o(n,f.orderBy))),angular.isDefined(f.filter)&&(angular.isFunction(l)||(l=H("$TreeDnDFilter")),angular.isFunction(l)&&(n=l(n,f.filter,f.filterOptions))),0<(t=n.length)){var a;for(a=0;a<t;a++)S(r,n[a],void 0,void 0,1,!0,a)}return k(r),r}f.updateLimit=function(){f.$TreeLimit+=50},f.reload_data=N}],compile:function(e){var o="",n=e.html().trim();0<n.length&&(o=n,e.html(""));return function(a,l,e){if("object"==typeof e&&e.enableDrag){var n=H("$TreeDnDDrag");angular.isFunction(n)&&n(a,l,A,M)}l.ready(function(){function t(e,r){var n,t=e[0].querySelector("[tree-dnd-node]");if(r.isTable=void 0,t){if(t=angular.element(t),n=t.attr("ng-include")){var a=s(n)(r)||n;if("string"==typeof a)return i.get(a,{cache:P}).then(function(e){var n=e.data||"";n=n.trim();var t=document.createElement("div");t.innerHTML=n,t=angular.element(t),r.isTable=!t[0].querySelector("[tree-dnd-nodes]")})}else r.isTable=!t[0].querySelector("[tree-dnd-nodes]");c.setTemplate(r,r.templateNode)}}var r;0<o.length?"object"==typeof(r=t(angular.element(o.trim()),a))?r.then(function(){l.append(d(o)(a))}):l.append(d(o)(a)):i.get(e.templateUrl||Y.getPath(),{cache:P}).then(function(e){var n=e.data||"";n=angular.element(n.trim()),"object"==typeof(r=t(n,a))?r.then(function(){l.append(d(n)(a))}):l.append(d(n)(a))})})}}}}angular.isUndefinedOrNull=function(e){return angular.isUndefined(e)||null===e},angular.isDefined=function(e){return!(angular.isUndefined(e)||null===e)},angular.module("ntt.TreeDnD",["template/TreeDnD/TreeDnD.html"]).constant("$TreeDnDClass",{tree:"tree-dnd",empty:"tree-dnd-empty",hidden:"tree-dnd-hidden",node:"tree-dnd-node",nodes:"tree-dnd-nodes",handle:"tree-dnd-handle",place:"tree-dnd-placeholder",drag:"tree-dnd-drag",status:"tree-dnd-status",icon:{1:"glyphicon glyphicon-minus",0:"glyphicon glyphicon-plus","-1":"glyphicon glyphicon-file"}}),angular.module("ntt.TreeDnD").controller("treeDndNodeHandleController",["$scope",function(e){this.scope=e}]),angular.module("ntt.TreeDnD").controller("treeDndNodeController",["$scope",function(e){this.scope=e}]),angular.module("ntt.TreeDnD").controller("treeDndNodesController",["$scope",function(e){this.scope=e}]),angular.module("ntt.TreeDnD").factory("$TreeDnDConvert",function(){return{line2tree:function(e,n,t,r){if(r="function"==typeof r?r:function(){},!e||0===e.length||!n||!t)return[];for(var a,l,o=[],i=[],d=e[0],s=d[n],c={},_=e.length,u=0;u<_;)r(d=e[u++]),c[s=d[n]]=d;for(u=0;u<_;)r(d=e[u++]),(a=(c[s=d[n]]=d)[t])?(l=c[a])&&(l.__children__?angular.isArray(l.__children__)?l.__children__.push(d):(console.error("Type of `parent.__children__` isn't array"),console.log(l.__children__)):l.__children__=[d]):i.push(s);for(_=i.length,u=0;u<_;u++)o.push(c[i[u]]);return o},tree2tree:function e(n,t,r){r="function"==typeof r?r:function(){};var a,l,o,i=[],d=n?n.length:0;for(a=0;a<d;a++)r(l=angular.copy(n[a])),angular.isArray(l[t])&&0<l[t].length&&(o=e(l[t],t,r),delete l[t],l.__children__=o),i.push(l);return i}}}),angular.module("ntt.TreeDnD").factory("$TreeDnDHelper",["$document","$window",function(t,r){var n={nodrag:function(e){return void 0!==e.attr("data-nodrag")},eventObj:function(e){var n=e;return void 0!==e.targetTouches?n=e.targetTouches.item(0):void 0!==e.originalEvent&&void 0!==e.originalEvent.targetTouches&&(n=e.originalEvent.targetTouches.item(0)),n},dragInfo:function(e){var n=e.getData(),t=e.getScopeTree(),r=e.getNode(n.__parent_real__);return{node:n,parent:r,move:{parent:r,pos:n.__index__},scope:e,target:t,drag:t,drop:e.getPrevSibling(n),changed:!1}},height:function(e){return e.prop("scrollHeight")},width:function(e){return e.prop("scrollWidth")},offset:function(e){var n=e[0].getBoundingClientRect();return{width:e.prop("offsetWidth"),height:e.prop("offsetHeight"),top:n.top+(r.pageYOffset||t[0].body.scrollTop||t[0].documentElement.scrollTop),left:n.left+(r.pageXOffset||t[0].body.scrollLeft||t[0].documentElement.scrollLeft)}},positionStarted:function(e,n){return{offsetX:e.pageX-this.offset(n).left,offsetY:e.pageY-this.offset(n).top,startX:e.pageX,lastX:e.pageX,startY:e.pageY,lastY:e.pageY,nowX:0,nowY:0,distX:0,distY:0,dirAx:0,dirX:0,dirY:0,lastDirX:0,lastDirY:0,distAxX:0,distAxY:0}},positionMoved:function(e,n,t){n.lastX=n.nowX,n.lastY=n.nowY,n.nowX=e.pageX,n.nowY=e.pageY,n.distX=n.nowX-n.lastX,n.distY=n.nowY-n.lastY,n.lastDirX=n.dirX,n.lastDirY=n.dirY,n.dirX=0===n.distX?0:0<n.distX?1:-1,n.dirY=0===n.distY?0:0<n.distY?1:-1;var r=Math.abs(n.distX)>Math.abs(n.distY)?1:0;return t?(n.dirAx=r,void(n.moving=!0)):(n.dirAx!==r?(n.distAxX=0,n.distAxY=0):(n.distAxX+=Math.abs(n.distX),0!==n.dirX&&n.dirX!==n.lastDirX&&(n.distAxX=0),n.distAxY+=Math.abs(n.distY),0!==n.dirY&&n.dirY!==n.lastDirY&&(n.distAxY=0)),n.dirAx=r,n)},replaceIndent:function(e,n,t,r){r=r||"left",angular.element(n.children()[0]).css(r,e.$callbacks.calsIndent(t))},isTreeDndNode:function(e){if(e){var n=angular.element(e);return n&&n.length&&void 0!==n.attr("tree-dnd-node")}return!1},isTreeDndNodes:function(e){if(e){var n=angular.element(e);return n&&n.length&&void 0!==n.attr("tree-dnd-nodes")}return!1},isTreeDndNodeHandle:function(e){if(e){var n=angular.element(e);return n&&n.length&&void 0!==n.attr("tree-dnd-node-handle")}return!1},isTreeDndDroppable:function(e){return n.isTreeDndNode(e)||n.isTreeDndNodes(e)||n.isTreeDndNodeHandle(e)},closestByAttr:function e(n,t){if(n&&t){var r=angular.element(n).parent();if(r){var a=!1;switch(typeof t){case"function":a=t(r);break;default:a=void 0!==r.attr(t)}return a?r:e(r,t)}}}};return n}]),angular.module("ntt.TreeDnD").factory("$TreeDnDPlugin",["$injector",function(n){return function(e){if(angular.isDefined(n)&&n.has(e))return n.get(e)}}]),angular.module("ntt.TreeDnD").factory("$TreeDnDTemplate",["$templateCache",function(t){var r={};return{setMove:function(e,n){r[n.$id]||(r[n.$id]={}),r[n.$id].movePath=e},setCopy:function(e,n){r[n.$id]||(r[n.$id]={}),r[n.$id].copyPath=e},getPath:function(){return"template/TreeDnD/TreeDnD.html"},getCopy:function(e){if(r[e.$id]&&r[e.$id].copyPath){var n=t.get(r[e.$id].copyPath);if(n)return n}return t.get("template/TreeDnD/TreeDnDStatusCopy.html")},getMove:function(e){if(r[e.$id]&&r[e.$id].movePath){var n=t.get(r[e.$id].movePath);if(n)return n}return t.get("template/TreeDnD/TreeDnDStatusMove.html")}}}]),angular.module("ntt.TreeDnD").factory("$TreeDnDViewport",e),e.$inject=["$window","$document","$timeout","$q","$compile"],angular.module("ntt.TreeDnD").directive("compile",["$compile",function(r){return{restrict:"A",link:function(n,t,e){n.$watch(e.compile,function(e){e&&(angular.isFunction(t.empty)?t.empty():t.html(""),t.append(r(e)(n)))})}}}]).directive("compileReplace",["$compile",function(r){return{restrict:"A",link:function(n,t,e){n.$watch(e.compileReplace,function(e){e&&t.replaceWith(r(e)(n))})}}}]),angular.module("ntt.TreeDnD").directive("treeDndNodeHandle",function(){return{restrict:"A",scope:!0,controller:"treeDndNodeHandleController",link:function(e,n){e.$type="TreeDnDNodeHandle",e.$class.handle&&n.addClass(e.$class.handle)}}}),angular.module("ntt.TreeDnD").directive("treeDndNode",["$TreeDnDViewport",function(p){return{restrict:"A",replace:!0,controller:"treeDndNodeController",link:function(e,n,t){e.$node_class="",e.$class.node&&(n.addClass(e.$class.node),e.$node_class=e.$class.node);var d,r="boolean"==typeof e.dragEnabled||"boolean"==typeof e.dropEnabled,s=t.treeDndNode;p.add(e,n),r&&(e.$type="TreeDnDNode",e.getData=function(){return e[s]});e.$element=n,e[s].__inited__=!0,e.getElementChilds=function(){return angular.element(n[0].querySelector("[tree-dnd-nodes]"))},e.setScope(e,e[s]),e.getScopeNode=function(){return e};var a,l,o=[],i=Object.keys(e[s]),c=i.length,_=e[s].__hashKey__,u=["__visible__","__children__","__level__","__index__","__index_real__","__parent__","__parent_real__","__dept__","__icon__","__icon_class__"],f=["__expanded__"],g=f.length;for(l=0;l<c+g;l++)l<c?-1===u.indexOf(i[l])&&o.push(s+"."+i[l]):-1===i.indexOf(f[l-c])&&o.push(s+"."+f[l-c]);a="["+o.join(",")+"]",e.$watch(a,function(e,n,t){var r=t[s];if("object"!=typeof r)return;r.__inited__||(r.__inited__=!0);r.__hashKey__!==_&&(t.deleteScope(t,r),t.setScope(t,r),_=r.__hashKey__);var a,l,o=r.__children__,i=o.length;l=0===i?-1:r.__expanded__?1:0;r.__icon__=l,r.__icon_class__=t.$class.icon[l],t.isTable||(d||(d=t.getElementChilds()),r.__expanded__?d.removeClass(t.$class.hidden):d.addClass(t.$class.hidden));for(a=0;a<i;a++)t.for_all_descendants(o[a],t.hiddenChild,r,!0)},!0),e.$on("$destroy",function(){e.deleteScope(e,e[s])})}}}]),angular.module("ntt.TreeDnD").directive("treeDndNodes",function(){return{restrict:"A",replace:!0,controller:"treeDndNodesController",link:function(e,n){e.$type="TreeDnDNodes",e.$class.nodes?(n.addClass(e.$class.nodes),e.$nodes_class=e.$class.nodes):e.$nodes_class=""}}}),angular.module("ntt.TreeDnD").directive("treeDnd",n),n.$inject=["$timeout","$http","$compile","$parse","$window","$document","$templateCache","$TreeDnDTemplate","$TreeDnDClass","$TreeDnDHelper","$TreeDnDPlugin","$TreeDnDViewport"],angular.module("ntt.TreeDnD").factory("$TreeDnDFilter",["$filter",function(e){return function(e,n,t,r){if(!angular.isArray(e)||0===e.length)return e;var a,l,o;if(o=function e(n){var t,r,a,l,o;if("object"!=typeof n||angular.isArray(n))return n;if(a=Object.keys(n),r=a.length,l=[],0<r)for(t=0;t<r;t++)"string"==typeof n[a[t]]&&0===n[a[t]].length||(o=angular.isArray(n[a[t]])?n[a[t]]:"object"==typeof n[a[t]]?e(n[a[t]]):{field:a[t],callback:n[a[t]]},l.push(o));return l}(n),!angular.isArray(o)&&"object"!=typeof o||0===o.length){for(a=0,l=e.length;a<l;a++)u(t,e[a],r||"__children__",_,i);return e}for(t.filter=o,t.filter_index=0,a=0,l=e.length;a<l;a++)u(t,e[a],r||"__children__",c,i);return e};function u(e,n,t,r,a,l){if(angular.isFunction(r)){var o,i,d,s=r(e,n),c=!1,_=e.filter_index;if(angular.isDefined(n[t])){for(i=(d=n[t]).length,o=e.filter_index=0;o<i;o++)c=u(e,d[o],t,r,a,s||l)||c;e.filter_index=_}return angular.isFunction(a)&&a(e,n,!0===s,!0===c,!0===l),s||c}}function d(n,t){if(!angular.isUndefinedOrNull(t)&&!angular.isArray(t)){if(angular.isFunction(n))return n(t,e);if("boolean"==typeof n)return(t=!!t)===n;if(angular.isDefined(n))try{return new RegExp(n).test(t)}catch(e){if("string"==typeof t)return-1<t.indexOf(n)}}}function s(e,n,t){if(angular.isArray(n))return function(e,n,t){var r,a=n.length||0,l=!1;if(0===a)return;for(r=0;r<a;r++)if(s(e,n[r],!t)){if(l=!0,!t)return!0}else if(t)return!1;return l}(e,n,t);var r,a,l,o=n.field,i=n.callback;if("_$"===o){for(l=(a=Object.keys(e)).length,r=0;r<l;r++)if(d(i,e[a[r]]))return!0}else if(angular.isDefined(e[o]))return d(i,e[o])}function i(e,n,t,r,a){return!0===t?(n.__filtered__=!0,n.__filtered_visible__=!0,void(n.__filtered_index__=e.filter_index++)):!0===r&&!0===e.showParent||!0===a&&!0===e.showChild?(n.__filtered__=!1,n.__filtered_visible__=!0,void(n.__filtered_index__=e.filter_index++)):(delete n.__filtered__,delete n.__filtered_visible__,void delete n.__filtered_index__)}function c(e,n){return 0===e.filter.length||s(n,e.filter,e.beginAnd||!1)}function _(e,n){return!1}}]),angular.module("ntt.TreeDnD").factory("$TreeDnDOrderBy",["$filter",function(e){var t=e("orderBy"),a=function e(n,t,r,a){var l,o,i;if(angular.isDefined(t[r])){for(o=(i=t[r]).length,l=0;l<o;l++)i[l]=e(n,i[l],r,a);t[r]=a(t[r],n)}return t},l=function(e,n){return t(e,n)};return function(e,n){if(!angular.isArray(e)||0===e.length||!(angular.isArray(n)||"object"==typeof n||angular.isString(n)||angular.isFunction(n))||0===n.length&&!angular.isFunction(n))return e;var t,r;for(t=0,r=e.length;t<r;t++)e[t]=a(n,e[t],"__children__",l);return l(e,n)}}]),angular.module("ntt.TreeDnD").factory("$TreeDnDDrag",["$timeout","$TreeDnDHelper",function(t,j){function i(e,n){var t=n.$scope;if(n.dragStarted){if(n.dragElm){e.preventDefault(),n.$window.getSelection?n.$window.getSelection().removeAllRanges():n.$window.document.selection&&n.$window.document.selection.empty();var r=j.eventObj(e),a=r.pageX-n.pos.offsetX,l=r.pageY-n.pos.offsetY;a<0&&(a=0),l<0&&(l=0),l+10>n.document_height&&(l=n.document_height-10),a+10>n.document_width&&(a=n.document_width-10),n.dragElm.css({left:a+t.$callbacks.calsIndent(n.offsetEdge+1,!0,!0)+"px",top:l+"px"}),t.enabledStatus&&t.setPositionStatus(e);var o=window.pageYOffset||n.$window.document.documentElement.scrollTop,i=o+(window.innerHeight||n.$window.document.clientHeight||n.$window.document.clientHeight);if(i<r.pageY&&i<=n.document_height&&window.scrollBy(0,10),o>r.pageY&&window.scrollBy(0,-10),j.positionMoved(e,n.pos,n.firstMoving),n.firstMoving)return void(n.firstMoving=!1);var d,s,c,_,u,f,g,p,h,m,v=r.pageX-n.$window.document.body.scrollLeft,b=r.pageY-(window.pageYOffset||n.$window.document.documentElement.scrollTop),y=!0,$=!0,D=n.dragInfo,x=D.move,E=D.node,T=D.drop,w=D.target,C=function(e,n){if(n.placeElm){var t=j.offset(n.placeElm);if(t.top<=e.pageY&&e.pageY<=t.top+t.height&&t.left<=e.pageX&&e.pageX<=t.left+t.width)return!0}return!1}(e,n);if(!C){if(n.$window.document.elementFromPoint(v,b),d=angular.element(n.$window.document.elementFromPoint(v,b)),j.isTreeDndDroppable(d)||(d=j.closestByAttr(d,j.isTreeDndDroppable)),j.isTreeDndNode(d)?s=d.controller("treeDndNode").scope:j.isTreeDndNodes(d)?s=d.controller("treeDndNodes").scope:j.isTreeDndNodeHandle(d)&&(s=d.controller("treeDndNodeHandle").scope),!s||!s.$callbacks||!s.$callbacks.droppable())return;if(m=function(){return w=s.getScopeTree(),p=D.target,D.target!==w&&(p.hidePlace(),p.targeting=!1,w.targeting=!0,D.target=w,n.placeElm=w.initPlace(s.$element,n.dragElm),f=!(p=void 0)),!0},angular.isFunction(s.getScopeNode)){if(s=s.getScopeNode(),!m())return}else{if("TreeDnDNodes"!==s.$type&&"TreeDnD"!==s.$type)return;if(!s.tree_nodes)return;if(0===s.tree_nodes.length){if(!m())return;u=!0}}}if((n.pos.dirAx&&!f||C)&&($=!1,s=D.scope),!s.$element&&!s)return;if(u)x.parent=void 0,T=void(x.pos=0);else if($){if(d=s.$element,angular.isUndefinedOrNull(d))return;if(_=j.offset(d),s.horizontal&&!s.isTable)c=r.pageX<_.left+j.width(d)/2;else if(s.isTable)c=r.pageY<_.top+j.height(d)/2;else{var S=j.height(d);if(s.getElementChilds()&&(S-=-j.height(s.getElementChilds())),r.pageY>_.top+S)return;c=r.pageY<_.top+S/2}if(!angular.isFunction(s.getData))return;if(p=s.getData(),h=s.getNode(p.__parent_real__),c){var k=s.getPrevSibling(p);x.parent=h,x.pos=angular.isDefined(k)?k.__index__+1:0,T=k}else!p.__expanded__||1===p.__children__.length&&p.__index_real__===E.__parent_real__?(x.parent=h,x.pos=p.__index__+1,T=p):(x.parent=p,T=void(x.pos=0))}else{if(!(n.pos.dirAx&&n.pos.distAxX>=w.dragBorder))return;if((n.pos.distAxX=0)<n.pos.distX){if(!(h=T)){if(!(0<=x.pos-1))return;h=x.parent.__children__[x.pos-1]}if(D.drag===D.target&&h===E&&t.enabledMove&&(h=w.getPrevSibling(h)),!h||!h.__visible__)return;var N=h.__children__.length;x.parent=h,T=0<(x.pos=N)?h.__children__[N-1]:void 0}else{if(!(n.pos.distX<0))return;if(!(p=x.parent)||!(0===p.__children__.length||p.__children__.length-1<x.pos||D.drag===D.target&&p.__index_real__===E.__parent_real__&&p.__children__.length-1===E.__index__&&t.enabledMove))return;h=w.getNode(p.__parent_real__),x.parent=h,x.pos=p.__index__+1,T=p}}D.drag===D.target&&x.parent&&E.__parent_real__===x.parent.__index_real__&&E.__index__===x.pos&&(y=!1),w.$callbacks.accept(D,x,y)&&(D.move=x,D.drop=T,D.changed=y,(D.scope=s).isTable?(j.replaceIndent(w,n.placeElm,angular.isUndefinedOrNull(x.parent)?1:x.parent.__level__+1),T?(h=(x.parent?x.parent.__children__:void 0)||D.target.treeData,T.__index__<h.length-1?(T=h[T.__index__+1],(g=D.target.getScope(T)).$element[0].parentNode.insertBefore(n.placeElm[0],g.$element[0])):(p=D.target.getLastDescendant(T),(g=D.target.getScope(p)).$element.after(n.placeElm))):(g=D.target.getScope(x.parent))&&(x.parent?g.$element.after(n.placeElm):g.getElementChilds().prepend(n.placeElm))):(g=D.target.getScope(T||x.parent),T?g.$element.after(n.placeElm):g.getElementChilds().prepend(n.placeElm)),w.showPlace(),t.$safeApply(function(){t.$callbacks.dragMove(D)}))}}else n.dragDelaying||(n.dragStarted=!0,t.$safeApply(function(){t.$callbacks.dragStart(n.dragInfo)}))}function d(e,n){if(e.preventDefault(),n.dragElm){var t=!1,r=n.$scope,a=r.getScope(n.dragInfo.node),l=a.$element;r.$safeApply(function(){t=r.$callbacks.beforeDrop(n.dragInfo)}),a.isTable?r.for_all_descendants(n.dragInfo.node,function(e,n){return a=r.getScope(e),l=a&&a.$element,a&&l&&(!n&&e.__visible__||n.__expanded__)&&r.$class.hidden&&l.removeClass(r.$class.hidden),!1===e.__visible__||!1===e.__expanded__},void 0,!0):r.$class.hidden&&l.removeClass(r.$class.hidden),n.dragElm.remove(),n.dragElm=void 0,r.enabledStatus&&r.hideStatus(),r.$$apply?r.$safeApply(function(){var e=r.$callbacks.dropped(n.dragInfo,t);r.$callbacks.dragStop(n.dragInfo,e),o()}):(s(n),r.$safeApply(function(){r.$callbacks.dragStop(n.dragInfo,!1),o()}))}function o(){n.dragInfo.target.hidePlace(),n.dragInfo.target.targeting=!1,n.dragInfo=void 0,r.$$apply=!1,r.setDragging(void 0)}angular.element(n.$document).unbind("touchend",n.dragEndEvent),angular.element(n.$document).unbind("touchcancel",n.dragEndEvent),angular.element(n.$document).unbind("touchmove",n.dragMoveEvent),angular.element(n.$document).unbind("mouseup",n.dragEndEvent),angular.element(n.$document).unbind("mousemove",n.dragMoveEvent),angular.element(n.$window.document.body).unbind("mouseleave",n.dragCancelEvent)}function r(e,n){n.$scope.$callbacks.draggable()&&function(e,t){if((t.hasTouch||2!==e.button&&3!==e.which)&&!(e.uiTreeDragging||e.originalEvent&&e.originalEvent.uiTreeDragging)){var n,r=angular.element(e.target);if(j.isTreeDndNodeHandle(r)?n=r.controller("treeDndNodeHandle").scope:(r=j.closestByAttr(r,j.isTreeDndNodeHandle))&&(n=r.controller("treeDndNodeHandle").scope),n&&n.$type&&"TreeDnDNodeHandle"===n.$type){var a,l=r.prop("tagName").toLowerCase(),o=t.$scope;if("input"!==l&&"textarea"!==l&&"button"!==l&&"select"!==l){for(;r&&r[0]&&r[0]!==t.element;){if(j.nodrag(r))return;r=r.parent()}if(e.uiTreeDragging=!0,e.originalEvent&&(e.originalEvent.uiTreeDragging=!0),e.preventDefault(),a=n.getScopeNode(),t.dragInfo=j.dragInfo(a),o.$callbacks.beforeDrag(a,t.dragInfo)){t.firstMoving=!0,o.setDragging(t.dragInfo);var i=j.eventObj(e);t.pos=j.positionStarted(i,a.$element),a.isTable?t.dragElm=angular.element(t.$window.document.createElement("table")).addClass(o.$class.tree).addClass(o.$class.drag).addClass(o.$tree_class):t.dragElm=angular.element(t.$window.document.createElement("ul")).addClass(o.$class.drag).addClass("tree-dnd-nodes").addClass(o.$tree_class),t.dragElm.css({width:j.width(a.$element)+"px","z-index":9995}),t.offsetEdge=0;var d,s,c,_=j.width(a.$element),u=a,f=u.$element,g=!!o.enabledCollapse,p=!1;u.isTable?(t.offsetEdge=t.dragInfo.node.__level__-1,s=angular.element(document.createElement("tbody")),c=angular.element(document.createDocumentFragment()),o.for_all_descendants(t.dragInfo.node,function(e,n){return u=o.getScope(e),f=u&&u.$element,u&&f&&(p||(d=f.clone(),j.replaceIndent(o,d,e.__level__-t.offsetEdge,"padding-left"),c.append(d),g&&(p=!0),o.enabledMove&&o.$class.hidden&&(!n||e.__visible__||n.__visible__&&n.__expanded__)&&f.addClass(o.$class.hidden))),p||!1===e.__visible__||!1===e.__expanded__},void 0,!g),s.append(c),t.dragElm.append(s)):(d=f.clone(),g&&d[0].querySelector("[tree-dnd-nodes]").remove(),t.dragElm.append(d),o.enabledMove&&o.$class.hidden&&f.addClass(o.$class.hidden)),t.dragElm.css({left:i.pageX-t.pos.offsetX+o.$callbacks.calsIndent(t.offsetEdge+1,!0,!0)+"px",top:i.pageY-t.pos.offsetY+"px"}),t.$document.find("body").append(t.dragElm),o.$callbacks.droppable()&&(t.placeElm=o.initPlace(a.$element,t.dragElm),a.isTable&&j.replaceIndent(o,t.placeElm,t.dragInfo.node.__level__),t.placeElm.css("width",_)),o.showPlace(),o.targeting=!0,o.enabledStatus&&(o.refreshStatus(),o.setPositionStatus(e)),angular.element(t.$document).bind("touchend",t.dragEndEvent),angular.element(t.$document).bind("touchcancel",t.dragEndEvent),angular.element(t.$document).bind("touchmove",t.dragMoveEvent),angular.element(t.$document).bind("mouseup",t.dragEndEvent),angular.element(t.$document).bind("mousemove",t.dragMoveEvent),angular.element(t.$document).bind("mouseleave",t.dragCancelEvent),t.document_height=Math.max(t.body.scrollHeight,t.body.offsetHeight,t.html.clientHeight,t.html.scrollHeight,t.html.offsetHeight),t.document_width=Math.max(t.body.scrollWidth,t.body.offsetWidth,t.html.clientWidth,t.html.scrollWidth,t.html.offsetWidth)}}}}}(e,n)}function s(n){n.element.bind("touchstart mousedown",function(e){n.dragDelaying=!0,n.dragStarted=!1,r(e,n),n.dragTimer=t(function(){n.dragDelaying=!1},n.$scope.dragDelay)}),n.element.bind("touchend touchcancel mouseup",function(){t.cancel(n.dragTimer)})}return function(n,e,t,r){var a={hasTouch:"ontouchstart"in window,firstMoving:void 0,dragInfo:void 0,pos:void 0,placeElm:void 0,dragElm:void 0,dragDelaying:!0,dragStarted:!1,dragTimer:void 0,body:document.body,html:document.documentElement,document_height:void 0,document_width:void 0,offsetEdge:void 0,$scope:n,$window:t,$document:r,element:e,bindDrag:function(){s(a)},dragEnd:function(e){d(e,a)},dragMoveEvent:function(e){i(e,a)},dragEndEvent:function(e){n.$$apply=!0,d(e,a)},dragCancelEvent:function(e){d(e,a)}},l=function(e){return function(e,n){var t=n.$scope;if(27===e.keyCode)t.enabledStatus&&t.hideStatus(),t.$$apply=!1,d(e,n);else if(t.enabledHotkey&&e.shiftKey){if(t.enableMove(!0),t.enabledStatus&&t.refreshStatus(),!n.dragInfo)return;var r=t.getScope(n.dragInfo.node),a=r.$element;r.isTable?t.for_all_descendants(n.dragInfo.node,function(e,n){return r=t.getScope(e),a=r&&r.$element,r&&a&&(!n&&e.__visible__||n.__expanded__)&&t.$class.hidden&&a.addClass(t.$class.hidden),!1===e.__visible__||!1===e.__expanded__},void 0,!0):t.$class.hidden&&a.addClass(t.$class.hidden)}}(e,a)},o=function(e){return function(e,n){var t=n.$scope;if(t.enabledHotkey&&!e.shiftKey){if(t.enableMove(!1),t.enabledStatus&&t.refreshStatus(),!n.dragInfo)return;var r=t.getScope(n.dragInfo.node),a=r.$element;r.isTable?t.for_all_descendants(n.dragInfo.node,function(e,n){return r=t.getScope(e),a=r&&r.$element,r&&a&&(!n&&e.__visible__||n.__expanded__)&&t.$class.hidden&&a.removeClass(t.$class.hidden),!1===e.__visible__||!1===e.__expanded__},void 0,!0):t.$class.hidden&&a.removeClass(t.$class.hidden)}}(e,a)};n.dragEnd=function(e){a.dragEnd(e)},a.bindDrag(),angular.element(t.document.body).bind("keydown",l),angular.element(t.document.body).bind("keyup",o),n.$on("$destroy",function(){angular.element(t.document.body).unbind("keydown",l),angular.element(t.document.body).unbind("keyup",o),n.statusElm&&n.statusElm.remove(),n.placeElm&&n.placeElm.remove()})}}]),angular.module("ntt.TreeDnD").factory("$TreeDnDControl",function(){function r(e){e.__expanded__=!1}function l(e){e.__expanded__=!0}return function(a){return{selected_node:void 0,on_select:void 0,for_all_descendants:a.for_all_descendants,select_node:function(e){var n=a.tree,t=n.deselect_node();return"object"==typeof e&&e!==t&&(e.__selected__=!0,n.selected_node=e,n.expand_all_parents(e),"function"==typeof n.on_select&&n.on_select(e)),e},deselect_node:function(){var e,n=a.tree;return"object"==typeof n.selected_node&&(n.selected_node.__selected__=void 0,delete n.selected_node.__selected__,e=n.selected_node,n.selected_node=void 0),e},get_parent:function(e){var n=a.tree;if((e=e||n.selected_node)&&void 0!==e.__parent_real__)return a.tree_nodes[e.__parent_real__]},for_all_ancestors:function(e,n){var t=a.tree,r=t.get_parent(e);return!r||!n(r)&&t.for_all_ancestors(r,n)},expand_all_parents:function(e){var n=a.tree;"object"==typeof(e=e||n.selected_node)&&n.for_all_ancestors(e,l)},collapse_all_parents:function(e){var n=a.tree;"object"==typeof(e=e||n.selected_node)&&n.for_all_ancestors(e,r)},reload_data:function(){return a.reload_data()},add_node:function(e,n,t,r){return"object"==typeof e?("object"!=typeof e.__children__&&(e.__children__=[]),0<=t?e.__children__.splice(t,0,n):e.__children__.push(n),r&&(e.__expanded__=!0)):0<=t?a.treeData.splice(t,0,n):a.treeData.push(n),n},add_node_root:function(e){return"object"==typeof e&&a.tree.add_node(void 0,e),e},expand_all:function(){for(var e=a.tree,n=a.treeData.length,t=0;t<n;t++)e.for_all_descendants(a.treeData[t],l)},collapse_all:function(){for(var e=a.tree,n=a.treeData.length,t=0;t<n;t++)e.for_all_descendants(a.treeData[t],r)},remove_node:function(e){var n=a.tree;"object"==typeof(e=e||n.selected_node)&&((void 0!==e.__parent_real__?n.get_parent(e).__children__:a.treeData).splice(e.__index__,1),n.reload_data(),n.selected_node===e&&(n.selected_node=void 0))},expand_node:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node))return e.__expanded__=!0,e},collapse_node:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node))return e.__expanded__=!1,e},get_selected_node:function(){return a.tree.selected_node},get_first_node:function(){var e=a.tree.selected_node;if(void 0===e&&(e=a.treeData),"object"==typeof e&&0<e.length)return e[0]},get_children:function(e){var n=a.tree;return void 0===e&&void 0===n.selected_node?n.treeData:"object"==typeof(e=e||n.selected_node)&&void 0!==e.__children__?e.__children__:void 0},get_siblings:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_parent(e);return t?t.__children__:a.treeData}},get_next_sibling:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_siblings(e),r=t.length;if(e.__index__<r)return t[e.__index__+1]}},get_prev_sibling:function(e){var n=a.tree;e=e||n.selected_node;var t=n.get_siblings(e);if(0<e.__index__)return t[e.__index__-1]},get_first_child:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=e.__children__;if(t&&0<t.length)return e.__children__[0]}},get_closest_ancestor_next_sibling:function(e){var n=a.tree;e=e||n.selected_node;var t=n.get_next_sibling(e);if(t)return t;var r=n.get_parent(e);return r?n.get_closest_ancestor_next_sibling(r):void 0},get_next_node:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_first_child(e);return t||n.get_closest_ancestor_next_sibling(e)}},get_prev_node:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_prev_sibling(e);return t?n.get_last_descendant(t):n.get_parent(e)}},get_last_descendant:a.getLastDescendant,select_parent_node:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_parent(e);if(t)return n.select_node(t)}},select_first_node:function(){var e=a.tree,n=e.get_first_node();return e.select_node(n)},select_next_sibling:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_next_sibling(e);if(t)return n.select_node(t)}},select_prev_sibling:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_prev_sibling(e);if(t)return n.select_node(t)}},select_next_node:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_next_node(e);if(t)return n.select_node(t)}},select_prev_node:function(e){var n=a.tree;if("object"==typeof(e=e||n.selected_node)){var t=n.get_prev_node(e);if(t)return n.select_node(t)}}}}}),angular.module("template/TreeDnD/TreeDnD.html",[]).run(["$templateCache",function(e){e.put("template/TreeDnD/TreeDnD.html",'<table ng-class="$tree_class">   <thead>       <tr>           <th ng-class="expandingProperty.titleClass" ng-style="expandingProperty.titleStyle">               {{expandingProperty.displayName || expandingProperty.field || expandingProperty}}           </th>           <th ng-repeat="col in colDefinitions" ng-class="col.titleClass" ng-style="col.titleStyle">               {{col.displayName || col.field}}           </th>       </tr>   </thead>   <tbody tree-dnd-nodes>       <tr tree-dnd-node="node" ng-repeat="node in tree_nodes track by node.__hashKey__"            ng-if="(node.__inited__ || node.__visible__)"           ng-click="onSelect(node)"            ng-class="(node.__selected__ ? \' active\':\'\')">           <td tree-dnd-node-handle               ng-style="expandingProperty.cellStyle ? expandingProperty.cellStyle : {\'padding-left\': $callbacks.calsIndent(node.__level__)}"               ng-class="expandingProperty.cellClass"               compile="expandingProperty.cellTemplate">               <a data-nodrag>                  <i ng-class="node.__icon_class__" ng-click="toggleExpand(node)" class="tree-icon"></i>               </a>               {{node[expandingProperty.field] || node[expandingProperty]}}           </td>           <td ng-repeat="col in colDefinitions" ng-class="col.cellClass" ng-style="col.cellStyle" compile="col.cellTemplate">               {{node[col.field]}}           </td>       </tr>   </tbody></table>'),e.put("template/TreeDnD/TreeDnDStatusCopy.html",'<label><i class="fa fa-copy"></i>&nbsp;<b>Copying</b></label>'),e.put("template/TreeDnD/TreeDnDStatusMove.html",'<label><i class="fa fa-file-text"></i>&nbsp;<b>Moving</b></label>')}])}();
//# sourceMappingURL=ng-tree-dnd.min.js.map
